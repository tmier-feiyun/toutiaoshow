(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a799823"],{"35b3":function(t,e,r){},"905d":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("发表文章")])]),r("div",{staticClass:"text item"},[r("el-form",{ref:"editFormRef",attrs:{"label-width":"120px",model:t.editForm,rules:t.editFormRules}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{attrs:{type:"text"},model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title",e)},expression:"editForm.title"}})],1),r("el-form-item",{attrs:{label:"内容",prop:"content"}},[r("quill-editor",{model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1),r("el-form-item",{attrs:{label:"封面"}},[r("el-radio-group",{model:{value:t.editForm.cover.type,callback:function(e){t.$set(t.editForm.cover,"type",e)},expression:"editForm.cover.type"}},[r("el-radio",{attrs:{label:0}},[t._v("无图")]),r("el-radio",{attrs:{label:1}},[t._v("单图")]),r("el-radio",{attrs:{label:3}},[t._v("三图")]),r("el-radio",{attrs:{label:-1}},[t._v("自动")])],1)],1),r("el-form-item",{attrs:{label:"频道: ",prop:"channel_id"}},[r("channel-com",{attrs:{cid:t.editForm.channel_id},on:{slt:t.selectHandler}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editArticle(!1)}}},[t._v("修改")]),r("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.EditDraft(!0)}}},[t._v("保存草稿")])],1)],1)],1)])},a=[],n=(r("a753"),r("8096"),r("14e1"),r("953d")),o=r("59e7"),s={name:"ArticleEdit",components:{quillEditor:n["quillEditor"],ChannelCom:o["a"]},created:function(){this.getArticlebyID()},data:function(){return{editFormRules:{title:[{required:!0,message:"标题必须填写"},{min:5,max:30,message:"标题长度介于5-30个字符"}],content:[{required:!0,message:"内容必须填写"}],channel_id:[{required:!0,message:"频道必选"}]},editForm:{title:"",content:"",cover:{type:0,images:[]},channel_id:""}}},methods:{selectHandler:function(t){this.editForm.channel_id=t},getArticlebyID:function(){var t=this,e=this.$http.get("/articles/".concat(this.$route.params.editid));e.then((function(e){200===e.status&&(t.editForm=e.data.data)})).catch((function(e){return t.$message.error("获取内容失败"+e)}))},editArticle:function(t){var e=this;this.$confirm("确认修改?","修改提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$refs.editFormRef.validate((function(r){if(r){var i=e.$http.put("/articles/".concat(e.$route.params.editid),e.editForm,{params:{draft:t}});i.then((function(t){201===t.status&&(e.$message.success("修改成功~"),e.$router.push("/article"))})).catch((function(t){return e.$message.error("修改文章失败"+t)}))}}))})).catch((function(){e.$message({type:"info",message:"已取消修改"})}))},EditDraft:function(t){var e=this;this.$refs.editFormRef.validate((function(r){if(r){var i=e.$http.put("/articles",e.editForm,{params:{draft:t}});i.then((function(t){201===t.status&&(e.$message.success("保存草稿成功~"),e.$router.push("/article"))})).catch((function(t){return e.$message.error("保存草稿失败"+t)}))}}))}}},c=s,l=(r("a1cf"),r("2877")),d=Object(l["a"])(c,i,a,!1,null,"71e1ae8c",null);e["default"]=d.exports},a1cf:function(t,e,r){"use strict";var i=r("35b3"),a=r.n(i);a.a}}]);
//# sourceMappingURL=chunk-0a799823.9fae2854.js.map