(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75e388ff"],{"2b12":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用户信息")])]),a("div",{staticClass:"text item main"},[a("div",{staticClass:"lt"},[a("el-form",{ref:"accountFormRef",attrs:{model:t.accountForm,"label-width":"100px",rules:t.accountFormRules}},[a("el-form-item",{attrs:{label:"用户名: ",prop:"name"}},[a("el-input",{model:{value:t.accountForm.name,callback:function(e){t.$set(t.accountForm,"name",e)},expression:"accountForm.name"}})],1),a("el-form-item",{attrs:{label:"手机号: ",prop:"mobile"}},[a("el-input",{attrs:{disabled:""},model:{value:t.accountForm.mobile,callback:function(e){t.$set(t.accountForm,"mobile",e)},expression:"accountForm.mobile"}})],1),a("el-form-item",{attrs:{label:"邮箱: ",prop:"email"}},[a("el-input",{model:{value:t.accountForm.email,callback:function(e){t.$set(t.accountForm,"email",e)},expression:"accountForm.email"}})],1),a("el-form-item",{attrs:{label:"个性签名: ",prop:"intro"}},[a("el-input",{model:{value:t.accountForm.intro,callback:function(e){t.$set(t.accountForm,"intro",e)},expression:"accountForm.intro"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"warning"},on:{click:t.editAccount}},[t._v("保留更改")])],1)],1)],1),a("div",{staticClass:"rt"},[a("el-upload",{attrs:{action:"","show-file-list":!1,"http-request":t.httpRequest}},[t.accountForm.photo?a("img",{staticClass:"avatar",staticStyle:{border:"2px solid #ccc"},attrs:{src:t.accountForm.photo,width:"200",height:"200"}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])])},c=[],n=(a("b0c0"),a("85fe")),r=new FormData;console.log(r);var i={name:"Account",data:function(){return{imageUrl:"",accountFormRules:{name:[{required:!0,message:"用户名必须填写",trigger:"blur"},{min:1,max:9,message:"用户名介于3-9个字符之间",trigger:"blur"}],email:[{required:!0,message:"邮箱必须填写",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}]},accountForm:{name:"",mobile:"",email:"",intro:""}}},created:function(){this.getAccountInfo()},methods:{httpRequest:function(t){var e=this,a=new FormData;a.append("photo",t.file);var o=this.$http.patch("/user/photo",a);o.then((function(t){"OK"===t.data.message&&(e.accountForm.photo=t.data.data.photo,n["a"].$emit("upAccountPhoto",e.accountForm.photo),e.$message.success("头像更新成功"))})).catch((function(t){return e.$message.error("图片上传失败"+t)}))},editAccount:function(){var t=this;this.$refs.accountFormRef.validate((function(e){if(e){var a=t.$http.patch("/user/profile",t.accountForm);a.then((function(e){console.log(e),"OK"===e.data.message&&(n["a"].$emit("upAccountName",t.accountForm.name),t.$message.success("信息更新成功,请刷新"))})).catch((function(e){return t.$message.error("编辑用户信息错误"+e)}))}}))},getAccountInfo:function(){var t=this,e=this.$http.get("/user/profile");e.then((function(e){console.log(e),"OK"===e.data.message&&(t.accountForm=e.data.data)})).catch((function(e){return t.$message.error("获取账户信息错误"+e)}))}}},s=i,u=(a("4697"),a("2877")),l=Object(u["a"])(s,o,c,!1,null,"0952c966",null);e["default"]=l.exports},4697:function(t,e,a){"use strict";var o=a("a2ef"),c=a.n(o);c.a},"85fe":function(t,e,a){"use strict";var o=a("2b0e");e["a"]=new o["default"]},a2ef:function(t,e,a){},b0c0:function(t,e,a){var o=a("83ab"),c=a("9bf2").f,n=Function.prototype,r=n.toString,i=/^\s*function ([^ (]*)/,s="name";!o||s in n||c(n,s,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-75e388ff.1c4afee3.js.map