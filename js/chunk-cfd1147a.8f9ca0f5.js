(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfd1147a"],{"230c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("全部图文")])]),a("div",{staticClass:"text item"},[a("el-form",{ref:"searchFormRef",attrs:{"label-width":"100px"},model:{value:t.searchForm,callback:function(e){t.searchForm=e},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"文章状态: "}},[a("el-radio-group",{model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("el-radio",{attrs:{label:""}},[t._v("全部")]),a("el-radio",{attrs:{label:"2"}},[t._v("审核通过")]),a("el-radio",{attrs:{label:"0"}},[t._v("草稿")]),a("el-radio",{attrs:{label:"1"}},[t._v("待审核")]),a("el-radio",{attrs:{label:"3"}},[t._v("审核失败")])],1)],1),a("el-form-item",{attrs:{label:"频道列表: "}},[a("channel-com",{on:{slt:t.selectHandler}})],1),a("el-form-item",{attrs:{label:"时间选择: "}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:t.timetotime,callback:function(e){t.timetotime=e},expression:"timetotime"}})],1)],1)],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("共找到"+t._s(t.tot)+"条符合条件的内容")])]),a("div",{staticClass:"text item"},[a("el-table",{attrs:{data:t.articleList}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return a("img",{attrs:{src:e.row.cover.images[0]||t.defaultImg,alt:"封面不存在",width:"150",height:"100"}})}}])}),a("el-table-column",{attrs:{label:"标题",prop:"title"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("el-tag",[t._v("草稿")]):1===e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v("待审核")]):2===e.row.status?a("el-tag",{attrs:{type:"info"}},[t._v("审核通过")]):3===e.row.status?a("el-tag",{attrs:{type:"warning"}},[t._v("审核失败")]):a("el-tag",{attrs:{type:"danger"}},[t._v("已删除")])]}}])}),a("el-table-column",{attrs:{label:"发表时间",prop:"pubdate"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(a){return t.$router.push("/articleedit/"+e.row.id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},nativeOn:{click:function(a){return t.del(e.row.id)}}})]}}])})],1)],1),a("div",{staticClass:"text item"},[a("el-pagination",{attrs:{background:"","current-page":t.searchForm.page,"page-sizes":[10,20,30,40],"page-size":t.searchForm.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.tot},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)},r=[],s=(a("0d03"),a("59e7")),i={name:"ArticleList",created:function(){this.getarticleList()},components:{ChannelCom:s["a"]},watch:{timetotime:function(t,e){t?(this.searchForm.begin_pubdate=t[0],this.searchForm.end_pubdate=t[1]):(this.searchForm.begin_pubdate="",this.searchForm.end_pubdate="")},searchForm:{handler:function(t,e){this.getarticleList()},deep:!0}},data:function(){return{defaultImg:"http://img.pic35.com/uploads/allimg/170330/1-1F330223J40-L.gif",tot:0,timetotime:"",articleList:[],searchForm:{status:"",channel_id:"",begin_pubdate:"",end_pubdate:"",page:1,per_page:10},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},methods:{selectHandler:function(t){this.searchForm.channel_id=t},handleSizeChange:function(t){this.searchForm.per_page=t},handleCurrentChange:function(t){this.searchForm.page=t},del:function(t){var e=this;this.$confirm("确认删除该文章?","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.$http.delete("/articles/".concat(t));a.then((function(t){console.log(t),204===t.status&&(e.$message.success("删除成功"),e.getarticleList())})).catch((function(t){return e.$message.error("删除文章失败"+t)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getarticleList:function(){var t=this,e={};for(var a in this.searchForm)this.searchForm[a]&&(e[a]=this.searchForm[a]);var n=this.$http.get("/articles",{params:e});n.then((function(e){"OK"===e.data.message&&(t.articleList=e.data.data.results,t.tot=e.data.data.total_count)})).catch((function(e){return t.$message.error("获取文章列表错误"+e)}))}}},c=i,l=(a("7707"),a("2877")),o=Object(l["a"])(c,n,r,!1,null,"026b2500",null);e["default"]=o.exports},"59e7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.chid,callback:function(e){t.chid=e},expression:"chid"}},t._l(t.channelList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)},r=[],s={name:"ChannelCom",watch:{cid:function(t,e){this.chid=this.cid},chid:function(t,e){this.$emit("slt",t)}},props:{cid:{default:0}},data:function(){return{chid:"",channelList:[]}},created:function(){this.getchannelList()},methods:{getchannelList:function(){var t=this,e=this.$http.get("/channels");e.then((function(e){"OK"===e.data.message&&(t.channelList=e.data.data.channels)})).catch((function(e){return t.$message.error("获取频道列表错误"+e)}))}}},i=s,c=a("2877"),l=Object(c["a"])(i,n,r,!1,null,"0b6eabc2",null);e["a"]=l.exports},7707:function(t,e,a){"use strict";var n=a("d677"),r=a.n(n);r.a},d677:function(t,e,a){}}]);
//# sourceMappingURL=chunk-cfd1147a.8f9ca0f5.js.map